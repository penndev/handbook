

## 硬件相关

- 查看cpu核数
cat /proc/cpuinfo | grep processor | wc -l
- 查看运行频率
watch -n 1 'grep "cpu MHz" /proc/cpuinfo'

hdparm -t /dev/sda1

fio 

yum install sysstat
iostat -dkx 1 查看IO瓶颈


## 命令

ping 
mtr
telnet
nc
time


## 文件

du -h –max-depth=1 ./ 文件夹大小
ls -lR ./ | grep "^-" | wc -l


## 网络

 
netstat -nat | grep ESTABLISHED | wc -l
 
https://github.com/wg/wrk


## 修改系统限制

```
修改网络配置
cat /etc/sysctl.conf

修改系统限制 
/etc/security/limits.conf

sudo sysctl -p  重载系统配置
```





# Git

本项目记住账号密码

    git config --local credential.helper store
    git config --global credential.helper store




# 国内服务器加速

github加速方法

/etc/hosts
140.82.112.3 github.com
185.199.108.153 assets-cdn.github.com
199.232.69.194 github.global.ssl.fastly.net


## 系统网络优化
/etc/sysctl.conf

net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_syncookies = 1 
net.ipv4.tcp_fin_timeout = 30
net.netfilter.nf_conntrack_max = 262144 




## yum 阿里云加速

```
cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
```

```
[base]
name=CentOS-$releasever - Base - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-$releasever

#released updates
[updates]
name=CentOS-$releasever - Updates - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-$releasever

#additional packages that may be useful
[extras]
name=CentOS-$releasever - Extras - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-$releasever

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-$releasever - Plus - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-$releasever

```


## 设置Mysql从库

CREATE USER 'transcodeslave'@'%' IDENTIFIED BY '123qaz!@#';
GRANT REPLICATION SLAVE ON *.* TO 'transcodeslave'@'%';

my.cnf
server-id=1
log-bin=mysql-bin

FLUSH TABLES WITH READ LOCK;
SHOW MASTER STATUS;


CHANGE MASTER TO
    MASTER_HOST='127.0.0.1',
    MASTER_USER='user',
    MASTER_PASSWORD='passwd',
    MASTER_LOG_FILE='mysql-bin.000001',
    MASTER_LOG_POS=1;


read_only = 1
SHOW VARIABLES LIKE 'read_only';

查看从库的状态
SHOW SLAVE STATUS

停止主从和移除
STOP SLAVE;
RESET SLAVE;