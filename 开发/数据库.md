


## 主从复制
> 必须保证主从机器互通。从库业务账号最好使用只读账号。必须写入数据造成数据不同步主从复制失败。

1. mysqldump 同步主库的数据到从库
2. 在主库创建从库用于复制的只读账号授权访问
```sql
CREATE USER 'slave'@'%' IDENTIFIED BY '123456';
GRANT REPLICATION SLAVE ON *.* TO 'slave'@'%';
FLUSH PRIVILEGES;
```
3. 使用从主库获取到的 `SHOW MASTER STATUS;`log信息补充到下面 执行这个命令前先锁表 `FLUSH TABLES WITH READ LOCK;`
```sql
CHANGE MASTER TO
    MASTER_HOST='192.168.1.1',
    MASTER_USER='slave',
    MASTER_PASSWORD='123456',
    MASTER_LOG_FILE='mysql-bin.000001',
    MASTER_LOG_POS=1;
```
4. 查看从库状态 `SHOW SLAVE STATUS`,启动从库复制 `START SLAVE;`,停止复制 `STOP SLAVE;`移除复制`RESET SLAVE;`

__经常使用SHOW SLAVE STATUS查看从库状态__